<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <title>FindEat</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="status">üìç Recupero la tua posizione...</div>
  <div id="map"></div>

  <!-- Modal dettaglio ristorante -->
  <div id="photoModal" role="dialog" aria-modal="true" aria-labelledby="photoTitle" tabindex="-1">
    <div id="photoModalContent">
      <div class="modal-grid">
        <div class="modal-left">
          <div class="photo-wrapper">
            <img id="currentPhoto" src="" alt="Foto ristorante">
            <p id="noPhotoMsg" style="display:none;">üòï Nessuna foto trovata per questo ristorante.</p>
          </div>
          <button id="prevPhoto" class="carousel-btn" type="button" aria-label="Foto precedente">&#10094;</button>
          <button id="nextPhoto" class="carousel-btn" type="button" aria-label="Foto successiva">&#10095;</button>
        </div>

        <div class="modal-right">
          <div class="header-row">
            <div class="title-wrap">
              <h2 id="photoTitle"></h2>
              <button id="likeBtn" class="like-btn" title="Mi piace" style="margin-left:8px;">‚ô°</button>
            </div>
            <div class="header-actions">
              <button id="closeModal" type="button" aria-label="Chiudi" title="Chiudi" class="close-inline">√ó</button>
            </div>
          </div>

          <div id="photoDetails" class="details"></div>

          <div id="reviewsContainer" class="reviews-container collapsed">
            <div id="reviewsHeader" class="reviews-header">
              Recensioni 
              <span id="reviewsCount" class="reviews-count"></span> 
              <span id="reviewsArrow">‚ñ∏</span>
              <span id="stars" class="stars"></span>
            </div>
            <div id="reviewsList" class="reviews-list" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Librerie -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Entry point modulare -->
  <script type="module">
      import { GOOGLE_MAPS_API_KEY } from './config.js';

      const script = document.createElement('script');
      script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&libraries=places&loading=async`;
      script.async = true;
      script.defer = true;
      document.head.appendChild(script);
    import '/main.js';
  </script>
</body>
</html>
